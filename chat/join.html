<!-- http://nttcom.github.io/skyway/en/docs/#JS -->
<!DOCTYPE html>
<html>
<head>
	<title>To chat with my belove</title>
	<script src="https://skyway.io/dist/0.3/peer.min.js"></script>
</head>
<body>

<video></video>
<video id="remote"></video>
	
<script type="text/javascript">
	var myAPIKey = "3389c3c2-0859-4f15-b69d-3f4e7a6a1867";
	var peer = new Peer("myPeerId", {key: myAPIKey});
	var mediaStream;



	/* get camera request from user */
	// Prefer camera resolution nearest to 1280x720.
	var constraints = { audio: false, video: { width: 1280, height: 720 } }; 

	navigator.mediaDevices.getUserMedia(constraints)
	.then(function(strem) {
	  var video = document.querySelector('video');
	  mediaStream = strem;
	  video.srcObject = strem;
	  video.onloadedmetadata = function(e) {
	    video.play();
	  };
	})
	.catch(function(err) { console.log(err.name + ": " + err.message); }); // always check for errors at the end.


	// Call a peer, providing our mediaStream
	var call = peer.call('myPeerId', mediaStream);

	call.on('stream', function(stream) {
		var remote = document.getElementById('remote');
		remote.srcObject = stream;
	  // `stream` is the MediaStream of the remote peer.
	  // Here you'd add it to an HTML video/canvas element.
	});



	

</script>
</body>
</html>
